<div class="profile-sidebar-header d-flex justify-content-between align-items-center mb-4">
  <h5 class="mb-0 profile-title">Mi Perfil</h5>
  <button id="closeSidebar" class="btn-close-profile">âœ•</button>
</div>

<div class="text-center mb-4">
  <!-- Avatar del usuario -->
  <div class="profile-user-icon mx-auto mb-3">
    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="white" viewBox="0 0 16 16">
      <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
    </svg>
  </div>

  <!-- InformaciÃ³n del usuario -->
  <div class="profile-user-info mb-3">
    <p class="profile-user-name mb-1" style="font-weight: 600; color: #333;">
      <%= current_user.name.present? ? current_user.name : current_user.email.split('@').first %>
    </p>
    <p class="profile-user-email" style="color: #999; font-size: 0.9rem;">
      <%= current_user.email %>
    </p>
  </div>

  <!-- Badge de admin si aplica -->
  <% if current_user.admin? %>
    <div class="profile-admin-badge" style="display: inline-block; background: #ffc107; color: #333; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 10px;">
      ðŸ‘‘ Administrador
    </div>
  <% end %>
</div>

<div class="profile-sidebar-body">
  <!-- Opciones del perfil -->
  <div class="profile-menu-options">
    <!-- Editar perfil -->
    <a href="<%= edit_user_registration_path %>" class="profile-menu-item d-flex align-items-center justify-content-between" style="padding: 12px 16px; border-bottom: 1px solid #eee; cursor: pointer; display: flex; text-decoration: none; color: inherit; transition: all 0.2s ease;">
      <div style="display: flex; align-items: center; gap: 12px;">
        <i class="fas fa-user-gear" style="color: #007bff; font-size: 1.2rem; width: 24px; text-align: center;"></i>
        <div>
          <div style="font-weight: 500; color: #333;">Editar Perfil</div>
          <div style="font-size: 0.85rem; color: #999;">Actualiza tu informaciÃ³n</div>
        </div>
      </div>
      <i class="fas fa-chevron-right" style="color: #ccc;"></i>
    </a>

    <!-- Dashboard (solo para admins) -->
    <% if current_user.admin? %>
      <a href="<%= dashboard_path %>" class="profile-menu-item admin-item d-flex align-items-center justify-content-between" style="padding: 12px 16px; border-bottom: 1px solid #eee; cursor: pointer; display: flex; text-decoration: none; color: inherit; transition: all 0.2s ease; background: rgba(255, 193, 7, 0.08);">
        <div style="display: flex; align-items: center; gap: 12px;">
          <i class="fas fa-sliders" style="color: #ffc107; font-size: 1.2rem; width: 24px; text-align: center;"></i>
          <div>
            <div style="font-weight: 500; color: #ffc107;">Dashboard</div>
            <div style="font-size: 0.85rem; color: #ff9800;">GestiÃ³n del sistema</div>
          </div>
        </div>
        <i class="fas fa-chevron-right" style="color: #ffc107;"></i>
      </a>
    <% end %>

    <!-- Modo oscuro -->
    <button id="darkModeToggle" class="profile-menu-item d-flex align-items-center justify-content-between" style="padding: 12px 16px; border-bottom: 1px solid #eee; cursor: pointer; display: flex; text-decoration: none; color: inherit; transition: all 0.2s ease; background: none; border: none; width: 100%; text-align: left;">
      <div style="display: flex; align-items: center; gap: 12px;">
        <i class="fas fa-moon" style="color: #6c757d; font-size: 1.2rem; width: 24px; text-align: center;"></i>
        <div>
          <div style="font-weight: 500; color: #333;">Modo Oscuro</div>
          <div style="font-size: 0.85rem; color: #999;">Alterna el tema</div>
        </div>
      </div>
      <i class="fas fa-chevron-right" style="color: #ccc;"></i>
    </button>

    <!-- Cerrar sesiÃ³n -->
    <%= button_to destroy_user_session_path, method: :delete, class: "profile-menu-item logout-item d-flex align-items-center justify-content-between", style: "padding: 12px 16px; cursor: pointer; display: flex !important; text-decoration: none; color: inherit; transition: all 0.2s ease; background: none; border: none; width: 100%; text-align: left;" do %>
      <div style="display: flex; align-items: center; gap: 12px;">
        <i class="fas fa-sign-out-alt" style="color: #dc3545; font-size: 1.2rem; width: 24px; text-align: center;"></i>
        <div>
          <div style="font-weight: 500; color: #dc3545;">Cerrar SesiÃ³n</div>
          <div style="font-size: 0.85rem; color: #ff6b6b;">Salir de tu cuenta</div>
        </div>
      </div>
      <i class="fas fa-chevron-right" style="color: #dc3545;"></i>
    <% end %>
  </div>
</div>

<style>
  .profile-sidebar-content {
    padding: 10px 0;
  }

  .profile-header {
    padding: 20px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .profile-name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin: 0;
  }

  .profile-email {
    font-size: 13px;
    margin: 0;
  }

  .profile-options {
    padding: 10px 0;
  }

  .profile-option-btn {
    color: #333;
    text-decoration: none;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .profile-option-btn:hover {
    background-color: #f5f5f5;
  }

  .profile-option-btn.admin-option {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.05));
  }

  .profile-option-btn.admin-option:hover {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.15));
  }

  .option-title {
    font-size: 14px;
    font-weight: 500;
    color: #333;
  }

  .profile-option-btn .text-muted {
    color: #999 !important;
  }

  .profile-option-btn:hover .text-muted {
    color: #666 !important;
  }
</style>
