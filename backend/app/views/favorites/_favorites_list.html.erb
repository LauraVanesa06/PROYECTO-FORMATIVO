<div id="favorites-offcanvas-content">
  <% if favorites.any? %>
    <div class="favorites-list" style="display: grid; grid-template-columns: 1fr; gap: 16px;">
      <% favorites.each do |favorite| %>
        <div class="favorite-item" data-favorite-id="<%= favorite.id %>" data-product-id="<%= favorite.product.id %>" style="display: flex; gap: 12px; padding: 12px; border: 1px solid #e0e0e0; border-radius: 8px; align-items: center;">
          
          <!-- Imagen del producto -->
          <div style="width: 80px; height: 80px; flex-shrink: 0; border-radius: 6px; overflow: hidden; background-color: #f5f5f5;">
            <% if favorite.product.images.attached? %>
              <%= image_tag(favorite.product.images.first, alt: favorite.product.nombre, style: "width: 100%; height: 100%; object-fit: cover;") %>
            <% else %>
              <%= image_tag "ProductoNoDisponible.png", alt: "Sin imagen", style: "width: 100%; height: 100%; object-fit: cover;" %>
            <% end %>
          </div>

          <!-- Información del producto -->
          <div style="flex: 1; display: flex; flex-direction: column; gap: 8px;">
            <h5 style="margin: 0; font-weight: 600; font-size: 14px; color: #333;">
              <%= favorite.product.nombre %>
            </h5>
            <p style="margin: 0; font-size: 13px; color: #666; line-height: 1.4;">
              <%= truncate(favorite.product.descripcion, length: 50) %>
            </p>
            <span style="font-weight: 700; color: #2563eb; font-size: 14px;">
              <%= favorite.product.precio_cop %>
            </span>
          </div>

          <!-- Botones de acción -->
          <div style="display: flex; flex-direction: column; gap: 6px; flex-shrink: 0;">
            <% if favorite.product.disponible %>
              <button class="btn btn-sm btn-primary btn-add-to-cart" 
                      data-product-id="<%= favorite.product.id %>"
                      data-url="<%= cart_items_path(product_id: favorite.product.id) %>"
                      style="padding: 6px 10px; font-size: 12px; white-space: nowrap;">
                <i class="fa-solid fa-cart-plus"></i>
              </button>
            <% else %>
              <span class="badge bg-secondary" style="font-size: 11px;">No disponible</span>
            <% end %>
            
            <button class="btn btn-sm btn-warning btn-remove-favorite favorite-btn" 
                    data-favorite-id="<%= favorite.id %>"
                    data-url="<%= favorite_path(favorite) %>"
                    data-method="delete"
                    data-product-id="<%= favorite.product.id %>"
                    style="padding: 6px 10px; font-size: 12px;">
              <i class="fa-solid fa-star"></i>
            </button>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div style="text-align: center; padding: 40px 20px;">
      <i class="fa-solid fa-heart" style="font-size: 48px; color: #ccc; margin-bottom: 16px; display: block;"></i>
      <p style="color: #999; font-size: 16px; margin: 0;">
        <%= t("favorites.empty", default: "No tienes productos favoritos") %>
      </p>
    </div>
  <% end %>
</div>
